{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///Users/martin/personal-projects/storyblok/digitalhub/src/lib/metadata.ts"],"sourcesContent":["import type { Metadata } from \"next\";\nimport type { Locale } from \"@/i18n/i18n-config\";\nimport { getStory } from \"@/lib/fetchers/storyblok-fetcher\";\n\ninterface MetadataOptions {\n\tslug: string;\n\tlang: Locale;\n}\n\nexport async function generateStoryblokMetadata({\n\tslug,\n\tlang,\n}: MetadataOptions): Promise<Metadata> {\n\tconst envPrefix = (process.env.CURRENT_ENV || \"dev\") as\n\t\t| \"dev\"\n\t\t| \"stage\"\n\t\t| \"prod\";\n\tconst story = await getStory(envPrefix, slug, lang);\n\n\tif (!story?.content) {\n\t\t// Return default metadata if story not found\n\t\treturn {\n\t\t\ttitle: \"DigitalHub\",\n\t\t\tdescription: \"\",\n\t\t};\n\t}\n\n\tconst seoData = story.content.seo_metadata;\n\tconst robots = story?.content?.robots?.[0];\n\n\tconst isProdDomain =\n\t\tprocess.env.ENV === \"PRODUCTION\" ||\n\t\tprocess.env.NEXT_PUBLIC_ENV === \"PRODUCTION\";\n\n\tconst baseMetadata: Metadata = {\n\t\ttitle: seoData?.title ?? \"DigitalHub\",\n\t\tdescription: seoData?.description ?? \"\",\n\t\topenGraph: {\n\t\t\ttitle: seoData?.og_title ?? \"\",\n\t\t\tdescription: seoData?.og_description ?? \"\",\n\t\t\timages: seoData?.og_image ? [seoData.og_image] : [],\n\t\t},\n\t\ttwitter: {\n\t\t\ttitle: seoData?.twitter_title ?? \"\",\n\t\t\tdescription: seoData?.twitter_description ?? \"\",\n\t\t\timages: seoData?.twitter_image ? [seoData.twitter_image] : [],\n\t\t},\n\t\trobots: {\n\t\t\tindex: robots?.index ?? false,\n\t\t\tfollow: robots?.follow ?? false,\n\t\t},\n\t};\n\n\t// Add alternates for production domain\n\tif (isProdDomain) {\n\t\tbaseMetadata.alternates = {\n\t\t\tcanonical: `https://DigitalHub.ch/${lang}/${slug.toLowerCase()}`,\n\t\t\tlanguages: {\n\t\t\t\ten: `https://DigitalHub.ch/en/${slug.toLowerCase()}`,\n\t\t\t\tde: `https://DigitalHub.ch/de/${slug.toLowerCase()}`,\n\t\t\t},\n\t\t};\n\t}\n\n\treturn baseMetadata;\n}\n"],"names":[],"mappings":";;;;AAEA;;AAOO,eAAe,0BAA0B,EAC/C,IAAI,EACJ,IAAI,EACa;IACjB,MAAM,YAAa,QAAQ,GAAG,CAAC,WAAW,IAAI;IAI9C,MAAM,QAAQ,MAAM,IAAA,0JAAQ,EAAC,WAAW,MAAM;IAE9C,IAAI,CAAC,OAAO,SAAS;QACpB,6CAA6C;QAC7C,OAAO;YACN,OAAO;YACP,aAAa;QACd;IACD;IAEA,MAAM,UAAU,MAAM,OAAO,CAAC,YAAY;IAC1C,MAAM,SAAS,OAAO,SAAS,QAAQ,CAAC,EAAE;IAE1C,MAAM,eACL,QAAQ,GAAG,CAAC,GAAG,KAAK,gBACpB,QAAQ,GAAG,CAAC,eAAe,KAAK;IAEjC,MAAM,eAAyB;QAC9B,OAAO,SAAS,SAAS;QACzB,aAAa,SAAS,eAAe;QACrC,WAAW;YACV,OAAO,SAAS,YAAY;YAC5B,aAAa,SAAS,kBAAkB;YACxC,QAAQ,SAAS,WAAW;gBAAC,QAAQ,QAAQ;aAAC,GAAG,EAAE;QACpD;QACA,SAAS;YACR,OAAO,SAAS,iBAAiB;YACjC,aAAa,SAAS,uBAAuB;YAC7C,QAAQ,SAAS,gBAAgB;gBAAC,QAAQ,aAAa;aAAC,GAAG,EAAE;QAC9D;QACA,QAAQ;YACP,OAAO,QAAQ,SAAS;YACxB,QAAQ,QAAQ,UAAU;QAC3B;IACD;IAEA,uCAAuC;IACvC,IAAI,cAAc;QACjB,aAAa,UAAU,GAAG;YACzB,WAAW,CAAC,sBAAsB,EAAE,KAAK,CAAC,EAAE,KAAK,WAAW,IAAI;YAChE,WAAW;gBACV,IAAI,CAAC,yBAAyB,EAAE,KAAK,WAAW,IAAI;gBACpD,IAAI,CAAC,yBAAyB,EAAE,KAAK,WAAW,IAAI;YACrD;QACD;IACD;IAEA,OAAO;AACR","debugId":null}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///Users/martin/personal-projects/storyblok/digitalhub/src/app/%5Blang%5D/%5B%5B...slug%5D%5D/page.tsx"],"sourcesContent":["import { StoryblokStory } from \"@storyblok/react/rsc\";\nimport type { Metadata } from \"next\";\nimport { notFound } from \"next/navigation\";\nimport { setRequestLocale } from \"next-intl/server\";\nimport type { Locale } from \"@/i18n/i18n-config\";\nimport { getStory } from \"@/lib/fetchers/storyblok-fetcher\";\nimport { generateStoryblokMetadata } from \"@/lib/metadata\";\n\nexport async function generateMetadata({\n\tparams,\n}: {\n\tparams: Promise<{ lang: Locale; slug: string[] }>;\n}): Promise<Metadata> {\n\tconst { lang, slug } = await params;\n\tconst finalSlug = slug ? slug?.join(\"/\").toString() : \"start\"; //here \"start\" is the root slug\n\n\treturn generateStoryblokMetadata({ slug: finalSlug, lang });\n}\n\nexport default async function Page({\n\tparams,\n}: Readonly<{ params: Promise<{ lang: Locale; slug: string[] }> }>) {\n\tconst { lang, slug } = await params;\n\tsetRequestLocale(lang);\n\n\t//Preparing Slug to match storyblok slug\n\tconst finalSlug = slug ? slug?.join(\"/\").toString() : \"start\"; //here \"start\" is the root slug\n\n\tconst envPrefix = (process.env.CURRENT_ENV || \"dev\") as\n\t\t| \"dev\"\n\t\t| \"stage\"\n\t\t| \"prod\";\n\n\tconst story = await getStory(envPrefix, finalSlug, lang);\n\n\tif (!story) {\n\t\tnotFound();\n\t}\n\n\treturn <StoryblokStory story={story} />;\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AAEA;AAAA;AACA;AAEA;AACA;;;;;;;AAEO,eAAe,iBAAiB,EACtC,MAAM,EAGN;IACA,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,MAAM;IAC7B,MAAM,YAAY,OAAO,MAAM,KAAK,KAAK,aAAa,SAAS,+BAA+B;IAE9F,OAAO,IAAA,mJAAyB,EAAC;QAAE,MAAM;QAAW;IAAK;AAC1D;AAEe,eAAe,KAAK,EAClC,MAAM,EAC2D;IACjE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,MAAM;IAC7B,IAAA,ufAAgB,EAAC;IAEjB,wCAAwC;IACxC,MAAM,YAAY,OAAO,MAAM,KAAK,KAAK,aAAa,SAAS,+BAA+B;IAE9F,MAAM,YAAa,QAAQ,GAAG,CAAC,WAAW,IAAI;IAK9C,MAAM,QAAQ,MAAM,IAAA,0JAAQ,EAAC,WAAW,WAAW;IAEnD,IAAI,CAAC,OAAO;QACX,IAAA,kWAAQ;IACT;IAEA,qBAAO,+YAAC,waAAc;QAAC,OAAO;;;;;;AAC/B","debugId":null}}]
}